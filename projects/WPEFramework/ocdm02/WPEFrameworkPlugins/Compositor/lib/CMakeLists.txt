set(compositor_artefact compositorplugin)

option(WPEFRAMEWORK_PLUGIN_COMPOSITOR_NXSERVER "Include a nxserver. [ON, OFF]." OFF)

if ("${WPEFRAMEWORK_PLUGIN_COMPOSITOR_IMPLEMENTATION}" STREQUAL "None" OR
    "${WPEFRAMEWORK_PLUGIN_COMPOSITOR_IMPLEMENTATION}" STREQUAL "OFF")
    message(FATAL_ERROR "WPEFRAMEWORK_PLUGIN_COMPOSITOR_IMPLEMENTATION not correctly set: ${WPEFRAMEWORK_PLUGIN_COMPOSITOR_IMPLEMENTATION}")
endif()

if (WPEFRAMEWORK_PLUGIN_COMPOSITOR_NXSERVER)
    add_subdirectory(NexusServer)
endif ()

add_subdirectory (${WPEFRAMEWORK_PLUGIN_COMPOSITOR_IMPLEMENTATION})
add_subdirectory (Client)
