cmake_minimum_required(VERSION 2.8)

set(TVPLATFORM_PLUGIN_NAME TVControl)

find_package(DVBApps)
find_package(Udev)
find_package(GStreamer)
find_package(GLIB)

file(GLOB TVPLATFORM_PLUGIN_INCLUDES *.h)

set(TVPLATFORM_PLUGIN_DEFINITIONS )
set(TVPLATFORM_PLUGIN_INCLUDE_DIRS ${WPEFRAMEWORK_INCLUDE_DIRS} ${DVBAPPS_INCLUDE_DIRS} ${GLIB_INCLUDE_DIRS} ${GSTREAMER_INCLUDE_DIRS})
set(TVPLATFORM_PLUGIN_INCLUDES Module.h TVPlatformImplementation.h TVCommon.h TunerBackend.h SourceBackend.h)
set(TVPLATFORM_PLUGIN_SOURCES Module.cpp TVPlatformImplementation.cpp TunerBackend.cpp SourceBackend.cpp)
set(TVPLATFORM_PLUGIN_LIBS ${DVBAPPS_LIBRARIES} ${UDEV_LIBRARIES} ${GLIB_LIBRARIES} ${GSTREAMER_LIBRARIES})

# add the library
add_library(${TVPLATFORM_PLUGIN_NAME} SHARED ${TVPLATFORM_PLUGIN_SOURCES})
target_compile_definitions(${TVPLATFORM_PLUGIN_NAME} PRIVATE ${TVPLATFORM_PLUGIN_DEFINITIONS})
target_include_directories(${TVPLATFORM_PLUGIN_NAME} PRIVATE ${TVPLATFORM_PLUGIN_INCLUDE_DIRS})
target_link_libraries(${TVPLATFORM_PLUGIN_NAME} ${TVPLATFORM_PLUGIN_LIBS})
set_target_properties(${TVPLATFORM_PLUGIN_NAME} PROPERTIES SUFFIX ".tvplatform")
set_target_properties(${TVPLATFORM_PLUGIN_NAME} PROPERTIES PREFIX "")

install(TARGETS ${TVPLATFORM_PLUGIN_NAME} DESTINATION ${CMAKE_INSTALL_PREFIX}/share/WPEFramework/${PLUGIN_NAME})
